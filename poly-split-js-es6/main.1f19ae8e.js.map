{"version":3,"sources":["../src/Vector.js","../src/Vectors.js","../src/Line.js","../src/Polygons.js","../src/Polygon.js","../src/index.js","renderArea.js","main.js","../node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["Vector","x","y","z","vector","Error","num","Math","sqrt","squareLength","l","length","Vectors","arrVector","clear","v","push","idx","reverse","index","splice","Line","a","b","c","start","end","A","B","C","abs","POLY_SPLIT_EPS","t","tempVec","subtraction","norm","multiplication","result","addition","point","n","m","dir","u","dot","s","line","d","det","inside","minimum","maximum","getStart","getEnd","initFromNumbers","initFromVector","l1","l2","q1","q2","p","min","max","Polygons","bisector","leftTriangle","Polygon","trapezoid","rightTriangle","p1_exist","p2_exist","p3_exist","p4_exist","leftTriangleSquare","trapezoidSquare","rightTriangleSquare","totalSquare","countSquare_signed","pointsCount","poly","size","i","get","square","cutLine","polygonSize","round","polygon","isClockwise","poly1","poly2","countSquare","minCutLine_exists","minSqLength","Number","MAX_VALUE","j","p1","p2","subPoly","createSubPoly","cut","tempCut","getCut","value","sqLength","isSegmentInsidePoly","push_back","distance","cnt","getSegmentNearestPoint","polygonCentroid","ri","insert","isPointInsidePoly","sum","empty","res","getBisector","v1","v2","v3","v4","l1s","getLineNearestPoint","cls_l1sl2","crossLineSegment","l2e","p4","cls_l2el1","l2s","p3","cls_l2sl1","l1e","cls_l1el2","tgA","getTanAngle","S","hh","h","pp","sn1","sn2","createPolygons","findCutLineRes","findCutLine","line1","line2","pc1","polySize","pc2","directedLine","crossSegmentSegment","excludeLine1","excludeLine2","css","getPointAlong","points","division","RenderArea","options","ctx","beginPath","moveTo","lineTo","closePath","globalAlpha","fill","stroke","clearRect","canvasSize","top","left","width","height","showHelp","font","fillStyle","dy","fillText","squareToCut","scale","selectedPolygon","polygons","selectedPoint","save","translate","offset_x","offset_y","color","polygons_color","strokeStyle","lineWidth","drawPoly","showInfo","countCenter","splitReturn","split","np","findNearestPoint","mouse","pointOutlineSize","drawCircle","pointSize","restore","paintEvent","e","mouseLeftPress","clientX","mouse_x","clientY","mouse_y","ptocLength","paint","button","console","log","delta","deltaY","splitNearestEdge","minDist","dist","findDistance","keyCode","shiftKey","splitReuslt","initPolygons","Array","context","centerX","centerY","r","arc","PI","ke","canvas","offsetTop","offsetLeft","renderArea","document","getElementById","getContext","window","innerWidth","innerHeight","onresize","onload","onkeyup","keyPressEvent","onwheel","wheelEvent","onmousemove","mouseMoveEvent","onmouseup","mouseReleaseEvent","onmousedown","mousePressEvent","oncontextmenu","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","appendChild","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","dep","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"main.1f19ae8e.js","sourceRoot":"..\\app","sourcesContent":["/**\r\n * Created by jyp on 2016-05-16.\r\n */\r\n\r\n/**\r\n *\r\n * @param x\r\n * @param y\r\n * @param z\r\n * @constructor\r\n */\r\nexport default class Vector {\r\n  constructor(x, y, z) {\r\n    this.x = x, this.y = y, this.z = z;\r\n  }\r\n  addition = vector => {\r\n    if (!vector instanceof Vector)\r\n      throw new Error('param vector was not Vector');\r\n    return new Vector(this.x + vector.x, this.y + vector.y, this.z + vector.z);\r\n  }\r\n\r\n  subtraction = vector => {\r\n    if (!vector instanceof Vector)\r\n      throw new Error('param vector was not Vector');\r\n    return new Vector(this.x - vector.x, this.y - vector.y, this.z - vector.z);\r\n  }\r\n\r\n  multiplication = num => {\r\n    if (typeof num !== 'number')\r\n      throw new Error('param num was not numeric');\r\n    return new Vector(this.x * num, this.y * num, this.z * num);\r\n  };\r\n\r\n  division = num => {\r\n    if (typeof num !== 'number')\r\n      throw new Error(\"param num was not numeric\");\r\n    return new Vector(this.x / num, this.y / num, this.z / num);\r\n  }\r\n\r\n  dot = vector => {\r\n    if (!vector instanceof Vector)\r\n      throw new Error('param v was not Vector');\r\n    return (this.x * vector.x + this.y * vector.y + this.z + vector.z);\r\n  }\r\n\r\n  length = () => {\r\n    return Math.sqrt(this.squareLength());\r\n  }\r\n\r\n  squareLength = () => {\r\n    return ((this.x * this.x) + (this.y * this.y) + (this.z + this.z));\r\n  }\r\n\r\n  norm = () => {\r\n    var l = this.length();\r\n    if (l == 0) {\r\n      return new Vector()\r\n    } else {\r\n      return new Vector(this.x / l, this.y / l, this.z / l);\r\n    }\r\n  }\r\n\r\n  equals = vector => {\r\n    if (!vector instanceof Vector)\r\n      throw new Error('param v was not Vector');\r\n    if (this.x == vector.x && this.y == vector.y && this.z == vector.z) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  toString = () => {\r\n    return `vector(${this.x}, ${this.y}, ${this.z})`;\r\n  }\r\n}\r\n","import Vector from './Vector.js';\r\n\r\nexport default class Vectors {\r\n    constructor() {\r\n        this.arrVector = [];\r\n    }\r\n    clear = () => {\r\n        this.arrVector.clear();\r\n    }\r\n\r\n    push_back = v => {\r\n        if (!v instanceof Vector)\r\n            throw new Error(\"param v was not Vector type\");\r\n        this.arrVector.push(v);\r\n    }\r\n\r\n    get = idx => {\r\n        if (typeof idx === 'number' && this.arrVector.length > idx)\r\n            return this.arrVector[idx];\r\n    }\r\n\r\n    size = () => {\r\n        return this.arrVector.length;\r\n    }\r\n\r\n    reverse = () => {\r\n        this.arrVector.reverse();\r\n    }\r\n\r\n    empty = () => {\r\n        return this.arrVector.length === 0 ? true : false;\r\n    }\r\n\r\n    insert = (index, vector) => {\r\n        if (!vector instanceof Vector)\r\n            throw new Error(\"param vector was not Vector type\");\r\n        this.arrVector.splice(index, 0, vector);\r\n    }\r\n}","/**\r\n * Created by jyp on 2016-05-16.\r\n */\r\nimport Vector from './Vector.js';\r\n\r\nexport default class Line {\r\n    static POLY_SPLIT_EPS = 1E-6;\r\n\r\n    constructor(a, b, c) {\r\n        this.A = null;\r\n        this.B = null;\r\n        this.C = null;\r\n        this.start = null;\r\n        this.end = null;\r\n\r\n        if (typeof a === 'number' && typeof b === 'number' && typeof c === 'number') {\r\n            this.initFromNumbers(a, b, c);\r\n        } else if (a instanceof Vector && b instanceof Vector) {\r\n            this.initFromVector(a, b);\r\n        }\r\n    }\r\n\r\n    initFromVector = (start, end) => {\r\n        if (!start instanceof Vector) throw new Error(\"param start was not Vector Type\");\r\n        if (!end instanceof Vector) throw new Error(\"param end was not Vector Type\");\r\n\r\n        this.A = start.y - end.y;\r\n        this.B = end.x - start.x;\r\n        this.C = start.x * end.y - end.x * start.y;\r\n        this.start = start;\r\n        this.end = end;\r\n    }\r\n\r\n    initFromNumbers = (A, B, C) => {\r\n        if (typeof A === \"number\" && typeof B === \"number\" && typeof C === \"number\") {\r\n            this.start = new Vector();\r\n            this.end = new Vector();\r\n\r\n            if (Math.abs(A) <= Line.POLY_SPLIT_EPS && Math.abs(B) >= Line.POLY_SPLIT_EPS) {\r\n                this.start.x = -1000;\r\n                this.start.y = -(C / B);\r\n\r\n                this.end.x = 1000;\r\n                this.end.y = this.start.y;\r\n            }\r\n            else if (Math.abs(B) <= Line.POLY_SPLIT_EPS && Math.abs(A) >= Line.POLY_SPLIT_EPS) {\r\n                this.start.x = -(C / A);\r\n                this.start.y = -1000;\r\n                this.end.x = this.start.x;\r\n                this.end.y = 1000;\r\n            }\r\n            else {\r\n                this.start.x = -1000;\r\n                this.start.y = -((A * this.start.x + C) / B);\r\n\r\n                this.end.x = 1000;\r\n                this.end.y = -((A * this.end.x + C) / B);\r\n            }\r\n        }\r\n        this.A = A; this.B = B; this.C = C;\r\n    }\r\n\r\n    getStart = () => {\r\n        return this.start;\r\n    }\r\n    getEnd = () => {\r\n        return this.end;\r\n    };\r\n\r\n    /**\r\n * \r\n * @returns {number}\r\n */\r\n    length = () => {\r\n        var x = this.end.x - this.start.x;\r\n        var y = this.end.y - this.start.y;\r\n        return Math.sqrt(x * x + y * y);\r\n    }\r\n\r\n    squareLength = () => {\r\n        var x = this.end.x - this.start.x;\r\n        var y = this.end.y - this.start.y;\r\n        return (x * x + y * y);\r\n    }\r\n\r\n    reverse = () => {\r\n        return new Line(this.end, this.start);\r\n    };\r\n\r\n    getPointAlong = t => {\r\n        var tempVec = this.end.subtraction(this.start).norm().multiplication(t);\r\n        var result = this.start.addition(tempVec);\r\n        return result;\r\n    }\r\n\r\n    getDistance = point => {\r\n        if (typeof point !== 'undefined' && point instanceof Vector) {\r\n            var n = this.A * point.x + this.B * point.y + this.C;\r\n            var m = Math.sqrt(this.A * this.A + this.B * this.B);\r\n\r\n            return Math.abs(n / m);\r\n        }\r\n    }\r\n\r\n    getLineNearestPoint = point => {\r\n        if (typeof point !== 'undefined' && point instanceof Vector) {\r\n            var dir = new Vector(this.B, -this.A);\r\n            var u = (point.subtraction(this.start)).dot(dir) / dir.squareLength();\r\n            return this.start.addition(dir.multiplication(u));\r\n        }\r\n    }\r\n\r\n    getSegmentNearestPoint = point => {\r\n        if (typeof point === 'undefined') {\r\n            throw new Error(\"param point was undefined\");\r\n        }\r\n        if (!point instanceof Vector) {\r\n            throw new Error(\"param point was not Vector Type\");\r\n        }\r\n        var dir = new Vector(this.B, -this.A, 0);\r\n        var u = (point.subtraction(this.start)).dot(dir) / dir.squareLength();\r\n\r\n        if (u < 0)\r\n            return this.start;\r\n        else if (u > 1)\r\n            return this.end;\r\n        else\r\n            return this.start.addition(dir.multiplication(u));\r\n    }\r\n\r\n    pointSide = point => {\r\n        var s = this.A.multiplication(point.x - this.start.x).addition(B.multiplication(point.x - this.start.y));\r\n        return (s > 0 ? 1 : (s < 0 ? -1 : 0));\r\n    }\r\n\r\n    crossLineSegment = line => {\r\n        var d = Line.det(this.A, this.B, line.A, line.B);\r\n        var result = new Vector();\r\n        if (d == 0) return 0;\r\n\r\n        result.x = -(Line.det(this.C, this.B, line.C, line.B) / d);\r\n        result.y = -(Line.det(this.A, this.C, line.A, line.C) / d);\r\n\r\n        return {\r\n            \"result\": result, \"value\": Line.inside(result.x, Line.minimum(line.start.x, line.end.x), Line.maximum(line.start.x, line.end.x)) &&\r\n                Line.inside(result.y, Line.minimum(line.start.y, line.end.y), Line.maximum(line.start.y, line.end.y))\r\n        };\r\n    }\r\n\r\n    crossSegmentSegment = line => {\r\n        var d = Line.det(this.A, this.B, line.A, line.B);\r\n        var result = new Vector();\r\n        if (d == 0) return 0;\r\n\r\n\r\n        result.x = - Line.det(this.C, this.B, line.C, line.B) / d;\r\n        result.y = - Line.det(this.A, this.C, line.A, line.C) / d;\r\n\r\n        return {\r\n            \"result\": result, \"value\": Line.inside(result.x, Line.minimum(this.start.x, this.end.x), Line.maximum(this.start.x, this.end.x)) &&\r\n                Line.inside(result.y, Line.minimum(this.start.y, this.end.y), Line.maximum(this.start.y, this.end.y)) &&\r\n                Line.inside(result.x, Line.minimum(line.start.x, line.end.x), Line.maximum(line.start.x, line.end.x)) &&\r\n                Line.inside(result.y, Line.minimum(line.start.y, line.end.y), Line.maximum(line.start.y, line.end.y))\r\n        };\r\n    }\r\n\r\n    crossLineLine = line => {\r\n        var d = Line.det(this.A, this.B, line.A, line.B);\r\n        var result = new Vector();\r\n        if (d == 0) return 0;\r\n\r\n        result.x = - Line.det(this.C, this.B, line.C, line.B) / d;\r\n        result.y = - Line.det(this.A, this.C, line.A, line.C) / d;\r\n\r\n        return { \"result\": result, \"value\": 1 };\r\n    }\r\n\r\n    static getBisector = (l1, l2) => {\r\n        var q1 = Math.sqrt(l1.A * l1.A + l1.B * l1.B);\r\n        var q2 = Math.sqrt(l2.A * l2.A + l2.B * l2.B);\r\n\r\n        var A = l1.A / q1 - l2.A / q2;\r\n        var B = l1.B / q1 - l2.B / q2;\r\n        var C = l1.C / q1 - l2.C / q2;\r\n\r\n        return { \"result\": new Line(A, B, C), \"l1\": l1, \"l2\": l2 };\r\n    }\r\n\r\n    static getTanAngle = (l1, l2) => {\r\n        return (l1.A * l2.B - l2.A * l1.B) / (l1.A * l2.A + l1.B * l2.B);\r\n    }\r\n\r\n    static directedLine = (p, d) => {\r\n        if (!p instanceof Vector) throw new Error(\"param p was not Vector Type\");\r\n        if (!d instanceof Vector) throw new Error(\"param d was not Vector Type\");\r\n        var l = new Line(p, p.addition(d));\r\n        return l;\r\n    }\r\n\r\n    static inside = (v, min, max) => { return (((min) <= (v) + (Line.POLY_SPLIT_EPS)) && ((v) <= (max) + (Line.POLY_SPLIT_EPS))) };\r\n    static det = (a, b, c, d) => { return (((a) * (d)) - ((b) * (c))) };\r\n\r\n    static maximum = (a, b) => { return (((a) < (b)) ? (b) : (a)) };\r\n    static minimum = (a, b) => { return (((a) > (b)) ? (b) : (a)) };\r\n\r\n    toString = () => {\r\n        return \"[\" + this.A + \", \" + this.B + \", \" + this.C + \"]-{\" + this.getStart() + \", \" + this.getEnd() + \"}\";\r\n    };\r\n}","import Polygon from './Polygon.js';\r\nimport Line from './Line.js';\r\n\r\nexport default class Polygons {\r\n\r\n    constructor() {\r\n        this.bisector = new Line();\r\n\r\n        this.leftTriangle = new Polygon();\r\n        this.trapezoid = new Polygon();\r\n        this.rightTriangle = new Polygon();\r\n\r\n        this.p1_exist = false;\r\n        this.p2_exist = false;\r\n        this.p3_exist = false;\r\n        this.p4_exist = false;\r\n\r\n        this.leftTriangleSquare = 0;\r\n        this.trapezoidSquare = 0;\r\n        this.rightTriangleSquare = 0;\r\n        this.totalSquare = 0;\r\n    }\r\n};","import Vector from './Vector.js';\r\nimport Vectors from './Vectors.js';\r\nimport Line from './Line.js';\r\nimport Polygons from './Polygons.js';\r\n// const Vector = require('./Vector.js');\r\n// const Vectors = require('./Vectors');\r\n// const Line = require('./Line.js');\r\n\r\nexport default class Polygon {\r\n  static POLY_SPLIT_EPS = 1E-6;\r\n\r\n  constructor(v) {\r\n    if (typeof v === 'undefined') {\r\n      v = new Vectors();\r\n    } else if (!v instanceof Vectors) {\r\n      throw new Error(\"param v was not Vector Type\");\r\n    }\r\n    this.poly = v;\r\n  }\r\n\r\n  countSquare = () => {\r\n    var t = this.countSquare_signed();\r\n    if (typeof t === 'number')\r\n      return t < 0 ? t * -1 : t; // absolute\r\n  }\r\n\r\n  countSquare_signed = () => {\r\n    var pointsCount = this.poly.size();\r\n    if (pointsCount < 3) {\r\n      return 0;\r\n    }\r\n\r\n    var result = 0.0;\r\n    for (var i = 0; i < pointsCount; i++) {\r\n      if (i == 0)\r\n        result += this.poly.get(i).x * (this.poly.get(pointsCount - 1).y - this.poly.get(i + 1).y);\r\n      else if (i == pointsCount - 1)\r\n        result += this.poly.get(i).x * (this.poly.get(i - 1).y - this.poly.get(0).y);\r\n      else\r\n        result += this.poly.get(i).x * (this.poly.get(i - 1).y - this.poly.get(i + 1).y);\r\n    }\r\n    return result / 2.0;\r\n  }\r\n\r\n  split = (square, cutLine) => {\r\n    if (typeof square !== 'number') {\r\n      throw new Error(\"param square was not defined\");\r\n    }\r\n\r\n    var polygonSize = Math.round(this.poly.size());\r\n    var polygon = this.poly;\r\n    if (!this.isClockwise()) {\r\n      polygon.arrVector.reverse();\r\n    }\r\n\r\n    var poly1 = new Polygon();\r\n    var poly2 = new Polygon();\r\n\r\n    if (this.countSquare() - square <= Polygon.POLY_SPLIT_EPS) {\r\n      poly1 = this;\r\n      return {\r\n        \"value\": 0,\r\n        \"poly1\": poly1,\r\n        \"poly2\": poly2,\r\n        \"cutLine\": cutLine\r\n      };\r\n    }\r\n\r\n    var minCutLine_exists = 0;\r\n    var minSqLength = Number.MAX_VALUE;\r\n\r\n    for (var i = 0; i < polygonSize - 1; i++) {\r\n      for (var j = i + 1; j < polygonSize; j++) {\r\n        var p1 = new Polygon();\r\n        var p2 = new Polygon();\r\n\r\n        var subPoly = Polygon.createSubPoly(polygon, i, j, p1, p2);\r\n        p1 = subPoly.poly1;\r\n        p2 = subPoly.poly2;\r\n\r\n        var l1 = new Line(polygon.get(i), polygon.get(i + 1));\r\n        var l2 = new Line(polygon.get(j), polygon.get((j + 1) < polygonSize ? (j + 1) : 0));\r\n        var cut = new Line();\r\n\r\n        var tempCut = Polygon.getCut(l1, l2, square, p1, p2, cut);\r\n        cut = tempCut.cut;\r\n\r\n\r\n        if (tempCut.value) {\r\n          var sqLength = cut.squareLength();\r\n          if (sqLength < minSqLength && Polygon.isSegmentInsidePoly(polygon, cut, i, j)) {\r\n            minSqLength = sqLength;\r\n            poly1 = p1;\r\n            poly2 = p2;\r\n            cutLine = cut;\r\n            minCutLine_exists = 1;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (minCutLine_exists) {\r\n      poly1.push_back(cutLine.getStart());\r\n      poly1.push_back(cutLine.getEnd());\r\n\r\n      poly2.push_back(cutLine.getEnd());\r\n      poly2.push_back(cutLine.getStart());\r\n\r\n      return {\r\n        \"value\": 1,\r\n        \"poly1\": poly1,\r\n        \"poly2\": poly2,\r\n        \"cutLine\": cutLine\r\n      };\r\n    } else {\r\n      poly1 = new Polygon(polygon);\r\n      return {\r\n        \"value\": 0,\r\n        \"poly1\": poly1,\r\n        \"poly2\": poly2,\r\n        \"cutLine\": cutLine\r\n      };\r\n    }\r\n  }\r\n\r\n  indDistance = (point) => {\r\n    if (typeof point === 'undefined') {\r\n      throw new Error(\"param point was undefined\");\r\n    }\r\n    if (!point instanceof Vector) {\r\n      throw new Error(\"param point was not Vector Type\");\r\n    }\r\n\r\n    var distance = Number.MAX_VALUE;\r\n\r\n    for (var i = 0, cnt = Math.round(this.poly.size() - 1); i < cnt; i++) {\r\n      var line = new Line();\r\n      line.initFromVector(this.poly.get(i), this.poly.get(i + 1));\r\n      var p = line.getSegmentNearestPoint(point);\r\n      var l = p.subtraction(point).length();\r\n      if (l < distance)\r\n        distance = l;\r\n    }\r\n    var line = new Line();\r\n    line.initFromVector(this.poly.get(this.poly.size() - 1), this.poly.get(0));\r\n    var p = line.getSegmentNearestPoint(point);\r\n    var l = (p.subtraction(point)).length();\r\n    if (l < distance)\r\n      distance = l;\r\n    return distance;\r\n  };\r\n\r\n  findDistance = (point) => {\r\n    if (typeof point === 'undefined') {\r\n      throw new Error(\"param point was undefined\");\r\n    }\r\n    if (!point instanceof Vector) {\r\n      throw new Error(\"param point was not Vector Type\");\r\n    }\r\n\r\n    var distance = Number.MAX_VALUE;\r\n\r\n    for (var i = 0, cnt = Math.round(this.poly.size() - 1); i < cnt; i++) {\r\n      var line = new Line();\r\n      line.initFromVector(this.poly.get(i), this.poly.get(i + 1));\r\n      var p = line.getSegmentNearestPoint(point);\r\n      var l = p.subtraction(point).length();\r\n      if (l < distance)\r\n        distance = l;\r\n    }\r\n    var line = new Line();\r\n    line.initFromVector(this.poly.get(this.poly.size() - 1), this.poly.get(0));\r\n    var p = line.getSegmentNearestPoint(point);\r\n    var l = (p.subtraction(point)).length();\r\n    if (l < distance)\r\n      distance = l;\r\n    return distance;\r\n  };\r\n\r\n  findDistance = (point) => {\r\n    if (typeof point === 'undefined') {\r\n      throw new Error(\"param point was undefined\");\r\n    }\r\n    if (!point instanceof Vector) {\r\n      throw new Error(\"param point was not Vector Type\");\r\n    }\r\n\r\n    var distance = Number.MAX_VALUE;\r\n\r\n    for (var i = 0, cnt = Math.round(this.poly.size() - 1); i < cnt; i++) {\r\n      var line = new Line();\r\n      line.initFromVector(this.poly.get(i), this.poly.get(i + 1));\r\n      var p = line.getSegmentNearestPoint(point);\r\n      var l = p.subtraction(point).length();\r\n      if (l < distance)\r\n        distance = l;\r\n    }\r\n    var line = new Line();\r\n    line.initFromVector(this.poly.get(this.poly.size() - 1), this.poly.get(0));\r\n    var p = line.getSegmentNearestPoint(point);\r\n    var l = (p.subtraction(point)).length();\r\n    if (l < distance)\r\n      distance = l;\r\n    return distance;\r\n  };\r\n\r\n  findNearestPoint = (point) => {\r\n    if (typeof point === 'undefined') {\r\n      throw new Error(\"param point was undefined\");\r\n    }\r\n    if (!point instanceof Vector) {\r\n      throw new Error(\"param point was not Vector Type\");\r\n    }\r\n    var result = null; //Vector type\r\n    var distance = Number.MAX_VALUE;\r\n\r\n    for (var i = 0, cnt = Math.round(this.poly.size() - 1); i < cnt; i++) {\r\n      var line = new Line()\r\n      line.initFromVector(this.poly.get(i), this.poly.get(i + 1));\r\n      var p = line.getSegmentNearestPoint(point);\r\n      var l = p.subtraction(point).length();\r\n      if (l < distance) {\r\n        distance = l;\r\n        result = p;\r\n      }\r\n    }\r\n    var line = new Line();\r\n    line.initFromVector(this.poly.get(this.poly.size() - 1), this.poly.get(0));\r\n    var p = line.getSegmentNearestPoint(point);\r\n    var l = (p.subtraction(point)).length();\r\n    if (l < distance) {\r\n      distance = l;\r\n      result = p;\r\n    }\r\n    distance; //just remove warning\r\n    return result;\r\n  };\r\n\r\n  countCenter = () => {\r\n    return Polygon.polygonCentroid(this.poly);\r\n  };\r\n\r\n  splitNearestEdge = (point) => {\r\n    if (typeof point === 'undefined')\r\n      throw new Error(\"param point was undefined\");\r\n    if (!point instanceof Vector)\r\n      throw new Error(\"param point was not Vector Type\");\r\n\r\n    var result;\r\n    var ri = -1;\r\n    var distance = Number.MAX_VALUE;\r\n\r\n    for (var i = 0, cnt = this.poly.size() - 1; i < cnt; i++) {\r\n      var line = new Line(this.poly.get(i), this.poly.get(i + 1));\r\n      var p = line.getSegmentNearestPoint(point);\r\n      var l = p.subtraction(point).length();\r\n      if (l < distance) {\r\n        distance = l;\r\n        ri = i;\r\n        result = p;\r\n      }\r\n    }\r\n    var line = new Line(this.poly.get(this.poly.size() - 1), this.poly.get(0));\r\n    var p = line.getSegmentNearestPoint(point);\r\n    var l = p.subtraction(point).length();\r\n    if (l < distance) {\r\n      distance = l;\r\n      ri = this.poly.size() - 1;\r\n      result = p;\r\n    }\r\n\r\n    if (ri != -1) {\r\n      this.poly.insert(ri + 1, result);\r\n    }\r\n\r\n  };\r\n\r\n  isPointInside = (point) => {\r\n    if (typeof point === 'undefined')\r\n      throw new Error(\"param point was undefined\");\r\n    if (!point instanceof Vector)\r\n      throw new Error(\"param point was not Vector Type\");\r\n\r\n    return Polygon.isPointInsidePoly(this.poly, point);\r\n  };\r\n\r\n  isClockwise = () => {\r\n    var sum = 0;\r\n    var t = Math.round(this.poly.size() - 1);\r\n    for (var i = 0; i < t; i++) {\r\n      sum += (this.poly.get(i + 1).x - this.poly.get(i).x) * (this.poly.get(i + 1).y + this.poly.get(i).y);\r\n    }\r\n    sum += (this.poly.get(0).x - this.poly.get(t).x) * (this.poly.get(0).y + this.poly.get(t).y);\r\n    return sum <= 0;\r\n  };\r\n\r\n  getVectors = () => {\r\n    return this.poly;\r\n  };\r\n\r\n  push_back = (v) => {\r\n    if (typeof v !== 'undefined' && v instanceof Vector)\r\n      this.poly.push_back(v);\r\n  };\r\n\r\n  empty = () => {\r\n    return this.poly.empty();\r\n  };\r\n\r\n  get = (idx) => {\r\n    if (typeof idx !== 'number')\r\n      throw new Error(\"param idx was not number type\");\r\n    if (this.poly.size() < idx)\r\n      throw new Error(\"param idx was bigger then Vectors size\");\r\n    return this.poly.get(idx);\r\n  };\r\n\r\n  setPolygon = (p) => {\r\n    if (p instanceof Polygon) {\r\n      this.poly = p.poly;\r\n      return this;\r\n    }\r\n  };\r\n\r\n  clear = () => {\r\n    this.poly.clear();\r\n  };\r\n\r\n  size = () => {\r\n    return this.poly.size();\r\n  };\r\n\r\n  static createPolygons = (l1, l2, res) => {\r\n    if (!l1 instanceof Line)\r\n      throw new Error(\"param l1 was not Line type\");\r\n    if (!l2 instanceof Line)\r\n      throw new Error(\"param l2 was not Line type\");\r\n    if (!res instanceof Polygons)\r\n      throw new Error(\"param res was not Polygons type\");\r\n\r\n    res.bisector = Line.getBisector(l1, l2).result;\r\n    var v1 = l1.getStart(),\r\n      v2 = l1.getEnd(),\r\n      v3 = l2.getStart(),\r\n      v4 = l2.getEnd();\r\n\r\n    res.p1_exist = false;\r\n    res.p4_exist = false;\r\n\r\n    if (v1 != v4) {\r\n      var l1s = new Line(v1, res.bisector.getLineNearestPoint(v1)),\r\n        p1 = new Vector(),\r\n        cls_l1sl2 = l1s.crossLineSegment(l2, p1);\r\n\r\n      p1 = cls_l1sl2.result;\r\n      res.p1_exist = (cls_l1sl2.value && p1 != v4);\r\n      if (res.p1_exist) {\r\n        res.leftTriangle.push_back(v1);\r\n        res.leftTriangle.push_back(v4);\r\n        res.leftTriangle.push_back(p1);\r\n\r\n        res.trapezoid.push_back(p1);\r\n      } else {\r\n        res.trapezoid.push_back(v4);\r\n      }\r\n\r\n      var l2e = new Line(v4, res.bisector.getLineNearestPoint(v4)),\r\n        p4 = new Vector(),\r\n        cls_l2el1 = l2e.crossLineSegment(l1, p4);\r\n      p4 = cls_l2el1.result;\r\n      res.p4_exist = (cls_l2el1.value && p4 != v1);\r\n      if (res.p4_exist) {\r\n        res.leftTriangle.push_back(v4);\r\n        res.leftTriangle.push_back(v1);\r\n        res.leftTriangle.push_back(p4);\r\n\r\n        res.trapezoid.push_back(p4);\r\n      } else {\r\n        res.trapezoid.push_back(v1);\r\n      }\r\n    } else {\r\n      res.trapezoid.push_back(v4);\r\n      res.trapezoid.push_back(v1);\r\n    }\r\n\r\n    res.p2_exist = false;\r\n    res.p3_exist = false;\r\n    if (v2 != v3) {\r\n      var l2s = new Line(v3, res.bisector.getLineNearestPoint(v3)),\r\n        p3 = new Vector(),\r\n        cls_l2sl1 = l2s.crossLineSegment(l1, p3);\r\n      p3 = cls_l2sl1.result;\r\n      res.p3_exist = (cls_l2sl1.value && p3 != v2);\r\n      if (res.p3_exist) {\r\n        res.rightTriangle.push_back(v3);\r\n        res.rightTriangle.push_back(v2);\r\n        res.rightTriangle.push_back(p3);\r\n\r\n        res.trapezoid.push_back(p3);\r\n      } else {\r\n        res.trapezoid.push_back(v2);\r\n      }\r\n\r\n      var l1e = new Line(v2, res.bisector.getLineNearestPoint(v2)),\r\n        p2 = new Vector(),\r\n        cls_l1el2 = l1e.crossLineSegment(l2, p2);\r\n      p2 = cls_l1el2.result;\r\n      res.p2_exist = (cls_l1el2.value && p2 != v3);\r\n      if (res.p2_exist) {\r\n        res.rightTriangle.push_back(v2);\r\n        res.rightTriangle.push_back(v3);\r\n        res.rightTriangle.push_back(p2);\r\n\r\n        res.trapezoid.push_back(p2);\r\n      } else {\r\n        res.trapezoid.push_back(v3);\r\n      }\r\n    } else {\r\n      res.trapezoid.push_back(v2);\r\n      res.trapezoid.push_back(v3);\r\n    }\r\n\r\n    res.leftTriangleSquare = res.leftTriangle.countSquare();\r\n    res.trapezoidSquare = res.trapezoid.countSquare();\r\n    res.rightTriangleSquare = res.rightTriangle.countSquare();\r\n\r\n    res.totalSquare = res.leftTriangleSquare + res.trapezoidSquare + res.rightTriangleSquare;\r\n\r\n    return res;\r\n  };\r\n\r\n  static findCutLine = (square, res, cutLine) => {\r\n    if (square > res.totalSquare) {\r\n      return {\r\n        \"value\": false\r\n      };\r\n    }\r\n\r\n    if (!res.leftTriangle.empty() && square < res.leftTriangleSquare) {\r\n      var m = square / res.leftTriangleSquare;\r\n      var p = res.leftTriangle.get(1).addition(res.leftTriangle.get(2).subtraction(res.leftTriangle.get(1)).multiplication(m));\r\n      if (res.p1_exist) {\r\n        cutLine = new Line(p, res.leftTriangle.get(0));\r\n        return {\r\n          \"value\": true,\r\n          \"res\": res,\r\n          \"cutLine\": cutLine\r\n        };\r\n      } else if (res.p4_exist) {\r\n        cutLine = new Line(res.leftTriangle.get(0), p);\r\n        return {\r\n          \"value\": true,\r\n          \"res\": res,\r\n          \"cutLine\": cutLine\r\n        };\r\n      }\r\n    } else if (res.leftTriangleSquare < square && square < (res.leftTriangleSquare + res.trapezoidSquare)) {\r\n      var t = new Line(res.trapezoid.get(0), res.trapezoid.get(3));\r\n      var tgA = Line.getTanAngle(t, res.bisector);\r\n      var S = square - res.leftTriangleSquare;\r\n      var m;\r\n      if (Math.abs(tgA) > Polygon.POLY_SPLIT_EPS) {\r\n        var a = new Line(res.trapezoid.get(0), res.trapezoid.get(1)).length();\r\n        var b = new Line(res.trapezoid.get(2), res.trapezoid.get(3)).length();\r\n        var hh = 2.0 * res.trapezoidSquare / (a + b);\r\n        var d = a * a - 4.0 * tgA * S;\r\n        var h = -(-a + Math.sqrt(d)) / (2.0 * tgA);\r\n        m = h / hh;\r\n      } else {\r\n        m = S / res.trapezoidSquare;\r\n      }\r\n      var p = res.trapezoid.get(0).addition(res.trapezoid.get(3).subtraction(res.trapezoid.get(0)).multiplication(m));\r\n      var pp = res.trapezoid.get(1).addition(res.trapezoid.get(2).subtraction(res.trapezoid.get(1)).multiplication(m));\r\n\r\n      cutLine = new Line(p, pp);\r\n      return {\r\n        \"value\": true,\r\n        \"res\": res,\r\n        \"cutLine\": cutLine\r\n      };\r\n    } else if (!res.rightTriangle.empty() && square > res.leftTriangleSquare + res.trapezoidSquare) {\r\n      var S = square - res.leftTriangleSquare - res.trapezoidSquare;\r\n      var m = S / res.rightTriangleSquare;\r\n      var p = res.rightTriangle.get(2).addition(res.rightTriangle.get(1).subtraction(res.rightTriangle.get(2)).multiplication(m));\r\n      if (res.p3_exist) {\r\n        cutLine = new Line(res.rightTriangle.get(0), p);\r\n        return {\r\n          \"value\": true,\r\n          \"res\": res,\r\n          \"cutLine\": cutLine\r\n        };\r\n      } else if (res.p2_exist) {\r\n        cutLine = new Line(p, res.rightTriangle.get(0));\r\n        return {\r\n          \"value\": true,\r\n          \"res\": res,\r\n          \"cutLine\": cutLine\r\n        };\r\n      }\r\n    }\r\n    return {\r\n      \"value\": false,\r\n      \"res\": res,\r\n      \"cutLine\": cutLine\r\n    };\r\n  };\r\n\r\n  static getCut = (l1, l2, s, poly1, poly2, cut) => {\r\n    if (!l1 instanceof Line)\r\n      throw new Error(\"param l1 was not Line type\");\r\n    if (!l2 instanceof Line)\r\n      throw new Error(\"param l2 was not Line type\");\r\n    if (!poly1 instanceof Polygon)\r\n      throw new Error(\"param poly1 was not Polygon type\");\r\n    if (!poly2 instanceof Polygon)\r\n      throw new Error(\"param poly2 was not Polygon type\");\r\n    if (typeof s !== \"number\")\r\n      throw new Error(\"param s was not number type\");\r\n\r\n    var sn1 = s + poly2.countSquare_signed();\r\n    var sn2 = s + poly1.countSquare_signed();\r\n\r\n    if (sn1 > 0) {\r\n      var res = new Polygons();\r\n      res = Polygon.createPolygons(l1, l2, res);\r\n\r\n      var findCutLineRes = Polygon.findCutLine(sn1, res, cut),\r\n        cut = findCutLineRes.cutLine;\r\n      if (findCutLineRes.value) {\r\n        return {\r\n          \"value\": true,\r\n          \"cut\": cut\r\n        };\r\n      }\r\n    } else if (sn2 > 0) {\r\n      var res = new Polygons();\r\n      res = Polygon.createPolygons(l2, l1, res);\r\n\r\n      var findCutLineRes = Polygon.findCutLine(sn2, res, cut),\r\n        cut = findCutLineRes.cutLine;\r\n      if (findCutLineRes.value) {\r\n        cut = cut.reverse();\r\n        return {\r\n          \"value\": true,\r\n          \"cut\": cut\r\n        };\r\n      }\r\n    }\r\n\r\n    return {\r\n      \"value\": false,\r\n      \"cut\": cut\r\n    };\r\n\r\n  };\r\n\r\n\r\n  /**\r\n   *\r\n   * @param poly {Vectors}\r\n   * @param line1 {number}\r\n   * @param line2 {number}\r\n   * @returns {{poly1: Polygon, poly2: Polygon}}\r\n   */\r\n  static createSubPoly = (poly, line1, line2, poly1, poly2) => {\r\n    if (!poly instanceof Vectors) {\r\n      throw new Error(\"param poly was not Vectors Type\");\r\n    }\r\n\r\n    poly1 = new Polygon(),\r\n      poly2 = new Polygon();\r\n\r\n    var pc1 = line2 - line1;\r\n    for (var i = 1; i <= pc1; i++) {\r\n      poly1.push_back(poly.get(i + line1));\r\n    }\r\n\r\n    var polySize = poly.size();\r\n    var pc2 = polySize - pc1;\r\n\r\n    for (var i = 1; i <= pc2; i++) {\r\n      poly2.push_back(poly.get((i + line2) % polySize));\r\n    }\r\n\r\n    return {\r\n      \"poly1\": poly1,\r\n      \"poly2\": poly2\r\n    };\r\n  };\r\n\r\n  static isPointInsidePoly = (poly, point) => {\r\n    var pointsCount = Math.round(poly.size() - 1);\r\n    var l = Line.directedLine(point, new Vector(0.0, 1e100));\r\n    var result = 0;\r\n    var res;\r\n    var v;\r\n    for (var i = 0; i < pointsCount; i++) {\r\n      var line = new Line(poly.get(i), poly.get(i + 1));\r\n      res = l.crossSegmentSegment(line);\r\n      result += res.value;\r\n    }\r\n    var line = new Line(poly.get(pointsCount), poly.get(0));\r\n    res = l.crossSegmentSegment(line);\r\n    result += res.value;\r\n    return result % 2 != 0;\r\n  };\r\n\r\n  static isSegmentInsidePoly = (poly, l, excludeLine1, excludeLine2) => {\r\n    var pointsCount = poly.size();\r\n    for (var i = 0; i < pointsCount; i++) {\r\n      if (i != excludeLine1 && i != excludeLine2) {\r\n        var p1 = poly.get(i);\r\n        var p2 = poly.get(i + 1 < pointsCount ? i + 1 : 0);\r\n        var p = new Vector(),\r\n          css = new Line(p1, p2).crossSegmentSegment(l, p);\r\n        p = css.result;\r\n\r\n        if (css.value) {\r\n          if ((p1.subtraction(p)).squareLength() > Polygon.POLY_SPLIT_EPS) {\r\n            if ((p2.subtraction(p)).squareLength() > Polygon.POLY_SPLIT_EPS) {\r\n\r\n              return 0;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return Polygon.isPointInsidePoly(poly, l.getPointAlong(0.5));\r\n  };\r\n\r\n  static polygonCentroid = (points) => {\r\n    var n = points.size();\r\n    var result = new Vector(0, 0, 0);\r\n    for (var i = 0; i < n; i++)\r\n      result = result.addition(points.get(i));\r\n    result = result.division(n);\r\n    return result;\r\n  };\r\n}\r\n","import Vector from './Vector.js';\r\nimport Vectors from './Vectors.js';\r\nimport Line from './Line.js';\r\nimport Polygon from './Polygon.js';\r\nimport Polygons from './Polygons.js';\r\n\r\nexport { Vector, Vectors, Line, Polygon, Polygons };","//const Vecotr = require('../src/').vector;\r\nimport { Vector, Vectors, Polygon, Polygons, Line } from '../src/index.js';\r\n// import Vector from './modules/Vector.js';\r\n// import Polygon from './modules/Polygon.js';\r\n// import Polygons from './modules/Polygons.js';\r\n// import Line from './modules/Line.js';\r\n/**\r\n * Created by jyp on 2016-05-19.\r\n */\r\n\r\nexport default class RenderArea {\r\n\r\n    constructor(options) {\r\n        this.polygons = [];\r\n        this.polygons_color = [];\r\n        this.squareToCut;\r\n        this.selectedPolygon = -1;\r\n        this.showInfo = 0;\r\n        this.showHelp = 1;\r\n        this.scale = 1;\r\n        this.offset_x = 0;\r\n        this.offset_y = 0;\r\n        this.ctx = options.ctx;\r\n\r\n        this.mouseLeftPress = 0;\r\n        this.mouse_x;\r\n        this.mouse_y;\r\n        this.mouse = new Vector(0, 0, 0);\r\n        this.pointSize = 10;\r\n        this.pointOutlineSize = 3;\r\n        this.selectedPoint = -1;\r\n        this.ke = null;\r\n\r\n        this.polygons_color.push(\"darkRed\");\r\n        this.polygons_color.push(\"green\");\r\n        this.polygons_color.push(\"darkGreen\");\r\n        this.polygons_color.push(\"blue\");\r\n        this.polygons_color.push(\"darkBlue\");\r\n        this.polygons_color.push(\"cyan\");\r\n        this.polygons_color.push(\"darkCyan\");\r\n        this.polygons_color.push(\"magenta\");\r\n        this.polygons_color.push(\"darkMagenta\");\r\n        this.polygons_color.push(\"darkYellow\");\r\n        this.polygons_color.push(\"gray\");\r\n        this.polygons_color.push(\"darkGray\");\r\n\r\n\r\n        this.canvasSize = { top: this.ctx.canvas.offsetTop, left: this.ctx.canvas.offsetLeft, width: this.ctx.canvas.width, height: this.ctx.canvas.height };\r\n    }\r\n\r\n\r\n    drawPoly = (poly) => {\r\n\r\n        this.ctx.beginPath();\r\n\r\n        var point = poly.get(0);\r\n        this.ctx.moveTo(point.x, point.y);\r\n        for (var i = 1, cnt = poly.size(); i < cnt; i++) {\r\n            point = poly.get(i);\r\n            this.ctx.lineTo(point.x, point.y);\r\n        }\r\n\r\n        this.ctx.closePath();\r\n        //this.ctx.strokeStyle = \"#000000\";\r\n        //this.ctx.lineWidth = 1;\r\n        //this.ctx.fillStyle = \"rgba(0,200,0,.4)\";\r\n        this.ctx.globalAlpha = 0.1;\r\n        this.ctx.fill();\r\n        this.ctx.globalAlpha = 1;\r\n        this.ctx.stroke();\r\n\r\n    };\r\n\r\n    // findCutLine = function () {\r\n\r\n    // };\r\n\r\n    paintEvent = () => {\r\n\r\n\r\n        this.ctx.clearRect(this.canvasSize.top, this.canvasSize.left, this.canvasSize.width, this.canvasSize.height);\r\n        if (this.showHelp) {\r\n            this.ctx.font = \"13px ' '\";\r\n            this.ctx.fillStyle = \"#000\";\r\n            var y = 0, dy = 13 + 1.0;\r\n            this.ctx.fillText(\"Cut Area Square: \" + Number(this.squareToCut), 10, y += dy);\r\n            this.ctx.fillText(\"Current this.scale: \" + Number(this.scale), 10, y += dy);\r\n            this.ctx.fillText(\"Selected Polygon: \" + this.selectedPolygon + \" / \" + this.polygons.length, 10, y += dy);\r\n            this.ctx.fillText(\"Selected Vertex: \" + this.selectedPoint, 10, y += dy);\r\n            this.ctx.fillText(\"Q/W - increase/decrease cut area square to 100\", 10, y += dy);\r\n            this.ctx.fillText(\"q/w - increase/decrease cut area square to 10\", 10, y += dy);\r\n            this.ctx.fillText(\"a/s - switch between areas\", 10, y += dy);\r\n            this.ctx.fillText(\"r - to restore initial polygon\", 10, y += dy);\r\n            this.ctx.fillText(\"i - show/hide polygons square value\", 10, y += dy);\r\n            this.ctx.fillText(\"c - to cut area as black cut line shows\", 10, y += dy);\r\n            this.ctx.fillText(\"h - show/hide this text\", 10, y += dy);\r\n            this.ctx.fillText(\"Mouse wheel to adjust this.scale\", 10, y += dy);\r\n            this.ctx.fillText(\"Left mouse click and drag'n'drop on background to move all scene\", 10, y += dy);\r\n            this.ctx.fillText(\"Left mouse click and drag'n'drop on vertex to move vertices\", 10, y += dy);\r\n            this.ctx.fillText(\"Right mouse click to select nearest polygon\", 10, y += dy);\r\n            this.ctx.fillText(\"Middle mouse click to split edge of selected polygon\", 10, y + dy);\r\n        }\r\n        this.ctx.save();\r\n        this.ctx.translate(this.offset_x, this.offset_y);\r\n        this.ctx.scale(this.scale, this.scale);\r\n\r\n        for (var i = 0; i < this.polygons.length; i++) {\r\n            var color = this.polygons_color[i % this.polygons_color.length];\r\n            //if(i==this.selectedPolygon)color=\"red\";\r\n            this.ctx.strokeStyle = color;\r\n            this.ctx.fillStyle = color;\r\n            //this.ctx.fillStyle.opacity= 1;\r\n            this.ctx.lineWidth = 1;\r\n            this.drawPoly(this.polygons[i]);\r\n            if (this.showInfo) {\r\n                var p = this.polygons[i].countCenter();\r\n                this.ctx.font = \"normal 12px 'malgun gothic'\";\r\n\r\n                this.ctx.fillText(this.polygons[i].countSquare(), p.x, p.y);\r\n\r\n            }\r\n        }\r\n\r\n        //debugger;\r\n        var cut = new Line();\r\n        var splitReturn = this.polygons[this.selectedPolygon].split(this.squareToCut, cut);\r\n        var poly1 = splitReturn.poly1;\r\n        var poly2 = splitReturn.poly2;\r\n        cut = splitReturn.cutLine;\r\n        if (splitReturn.value) {\r\n            this.ctx.strokeStyle = \"black\";\r\n            this.ctx.lineWidth = 1.5;\r\n\r\n            this.ctx.beginPath();\r\n            this.ctx.moveTo(cut.getStart().x, cut.getStart().y);\r\n            this.ctx.lineTo(cut.getEnd().x, cut.getEnd().y);\r\n            this.ctx.closePath();\r\n            this.ctx.stroke();\r\n\r\n        }\r\n\r\n        if (this.showInfo) {\r\n            var np = this.polygons[this.selectedPolygon].findNearestPoint(this.mouse);\r\n            if (typeof np !== 'undefined' && np !== null && typeof np.x === \"number\") {\r\n                this.ctx.strokeStyle = \"rgba(0,0,0,0.5)\";\r\n                this.ctx.lineWidth = 1;\r\n                this.ctx.beginPath();\r\n                this.ctx.moveTo(this.mouse.x, this.mouse.y);\r\n                this.ctx.lineTo(np.x, np.y);\r\n                this.ctx.closePath();\r\n                this.ctx.stroke();\r\n            }\r\n\r\n        }\r\n\r\n        this.ctx.strokeStyle = \"rgba(250,0,0,0.5)\";\r\n\r\n        this.ctx.lineWidth = this.pointOutlineSize;\r\n        this.drawPoly(this.polygons[this.selectedPolygon]);\r\n        for (var i = 0, cnt = this.polygons[this.selectedPolygon].size(); i < cnt; i++) {\r\n            var p = this.polygons[this.selectedPolygon].get(i);\r\n            this.drawCircle(this.ctx, p.x, p.y, this.pointSize);\r\n            if (this.selectedPoint === i) {\r\n                this.ctx.fillStyle = \"rgba(255,255,0,0.9)\";\r\n                this.ctx.fill();\r\n            } else {\r\n                this.ctx.fillStyle = \"rgba(255,255,255,1)\";\r\n                this.ctx.fill();\r\n            }\r\n            this.ctx.stroke();\r\n        }\r\n\r\n        this.ctx.restore();\r\n    };\r\n\r\n    paint = this.paintEvent;\r\n\r\n\r\n    mouseMoveEvent = (e) => {\r\n        if (this.mouseLeftPress && this.selectedPolygon != -1 && this.selectedPoint != -1) {\r\n            this.polygons[this.selectedPolygon].get(this.selectedPoint).x = this.polygons[this.selectedPolygon].get(this.selectedPoint).x + (e.clientX - this.mouse_x) / this.scale;\r\n            this.polygons[this.selectedPolygon].get(this.selectedPoint).y = this.polygons[this.selectedPolygon].get(this.selectedPoint).y + (e.clientY - this.mouse_y) / this.scale;\r\n        } else if (this.mouseLeftPress) {\r\n            this.offset_x = this.offset_x + (e.clientX - this.mouse_x);\r\n            this.offset_y = this.offset_y + (e.clientY - this.mouse_y);\r\n        }\r\n\r\n        this.mouse_x = e.clientX;\r\n        this.mouse_y = e.clientY;\r\n        this.mouse = new Vector((e.clientX - this.offset_x) / this.scale, (e.clientY - this.offset_y) / this.scale, 0);\r\n\r\n        if (this.selectedPolygon != -1) {\r\n            for (var i = 0, cnt = this.polygons[this.selectedPolygon].size(); i < cnt; i++) {\r\n                var p = this.polygons[this.selectedPolygon].get(i);\r\n                var ptocLength = this.mouse.subtraction(p).length();\r\n                if (ptocLength < this.pointSize + this.pointOutlineSize) {\r\n                    this.selectedPoint = i;\r\n\r\n                    this.paint();\r\n                    return;\r\n                }\r\n            }\r\n            this.selectedPoint = -1;\r\n        }\r\n\r\n\r\n        this.paint();\r\n    };\r\n\r\n\r\n    mouseReleaseEvent = (e) => {\r\n        if (e.button == 0) {\r\n            console.log(\"lmouseup\");\r\n            this.mouseLeftPress = 0;\r\n            this.selectedPoint = -1;\r\n        }\r\n        if (e.button == 1) {\r\n            console.log(\"mmouseup\");\r\n\r\n        }\r\n\r\n        if (e.button == 2) {\r\n            console.log(\"rmouseup\");\r\n\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    wheelEvent = (e) => {\r\n\r\n\r\n        var delta = e.deltaY > 0 ? 1 : (e.deltaY < 0 ? -1 : 0);\r\n\r\n        if (typeof delta === 'number' && delta != 0) {\r\n            this.scale += 5 * this.scale / (delta * 100);\r\n            this.paint();\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    /**\r\n     * \r\n     * @param e\r\n     * @returns {boolean}\r\n     */\r\n    mousePressEvent = (e) => {\r\n        // console.log(e);\r\n        this.mouse_x = e.clientX;\r\n        this.mouse_y = e.clientY;\r\n\r\n        this.mouse = new Vector((e.clientX - this.offset_x) / this.scale, (e.clientY - this.offset_y) / this.scale, 0);\r\n\r\n        if (e.button == 0/*lbtn*/) {\r\n            console.log(\"lbtn down\");\r\n            this.mouseLeftPress = 1;\r\n            for (var i = 0, cnt = this.polygons[this.selectedPolygon].size(); i < cnt; i++) {\r\n                var p = this.polygons[this.selectedPolygon].get(i);\r\n                if (this.mouse.subtraction(p).length() < this.pointSize + this.pointOutlineSize) {\r\n                    this.selectedPoint = i;\r\n                    this.paint();\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (e.button == 1/*mbtn*/) {\r\n            console.log(\"mbtn down\");\r\n            if (this.selectedPolygon != -1 && this.mouse instanceof Vector) {\r\n                this.polygons[this.selectedPolygon].splitNearestEdge(this.mouse);\r\n                this.paint();\r\n            }\r\n        }\r\n\r\n        if (e.button == 2/*rbtn*/) {\r\n            console.log(\"rbtn down\");\r\n            var minDist = Number.MAX_VALUE;\r\n            for (var i = 0, cnt = this.polygons.length; i < cnt; i++) {\r\n                var dist = this.polygons[i].findDistance(this.mouse);\r\n                if (dist < minDist) {\r\n                    minDist = dist;\r\n                    this.selectedPolygon = i;\r\n                }\r\n            }\r\n            this.squareToCut = this.polygons[this.selectedPolygon].countSquare() / 2.0;\r\n            this.paint();\r\n        }\r\n        return false;\r\n    };\r\n\r\n\r\n\r\n    keyPressEvent = (e) => {\r\n        console.log(\"keyevent: \", e);\r\n        if (e.keyCode == 81/*Q*/) {\r\n            this.squareToCut += (e.shiftKey ? 1000 : 100);\r\n            this.paint();\r\n        }\r\n\r\n        if (e.keyCode == 87/*W*/) {\r\n            var t = this.squareToCut - (e.shiftKey ? 1000 : 100);\r\n            this.squareToCut = t < 10 ? 10 : t;\r\n            this.paint();\r\n        }\r\n        if (e.keyCode == 67/*C*/) {\r\n            var splitReuslt = this.polygons[this.selectedPolygon].split(this.squareToCut);\r\n            var poly1 = splitReuslt.poly1, poly2 = splitReuslt.poly2;\r\n            var cut = splitReuslt.cutLine;\r\n            if (splitReuslt.value) {\r\n                this.polygons[this.selectedPolygon] = poly1;\r\n                this.polygons.push(poly2);\r\n\r\n                if (poly1.countSquare() < poly2.countSquare()) {\r\n                    this.selectedPolygon = this.polygons.length - 1;\r\n                }\r\n\r\n                this.paint();\r\n            }\r\n        }\r\n        if (e.keyCode == 80/*P*/) {\r\n            for (var i = 0, cnt = this.polygons[this.selectedPolygon].length; i < cnt; i++) {\r\n                var p = this.polygons[this.selectedPolygon].get(i);//vector\r\n            }\r\n            this.paint();\r\n        }\r\n\r\n        if (e.keyCode == 65/*A*/) {\r\n            if (this.selectedPolygon > 0)\r\n                this.selectedPolygon--;\r\n            this.paint();\r\n        }\r\n\r\n        if (e.keyCode == 83/*S*/) {\r\n            if (this.selectedPolygon < Math.round(this.polygons.length - 1))\r\n                this.selectedPolygon++;\r\n            this.paint();\r\n        }\r\n\r\n        if (e.keyCode == 82/*R*/) {\r\n            this.initPolygons();\r\n            this.paint();\r\n        }\r\n\r\n        if (e.keyCode == 73/*I*/) {\r\n            this.showInfo = !this.showInfo;\r\n            this.paint();\r\n        }\r\n\r\n        if (e.keyCode == 72/*H*/) {\r\n            this.showHelp = !this.showHelp;\r\n            this.paint();\r\n        }\r\n\r\n    };\r\n\r\n    initPolygons = () => {\r\n        this.polygons = new Array();\r\n        this.polygons.push(new Polygon());\r\n        this.polygons[0].push_back(new Vector(450.0, 100.0, 0));\r\n        this.polygons[0].push_back(new Vector(900.0, 100.0, 0));\r\n        this.polygons[0].push_back(new Vector(900.0, 400.0, 0));\r\n        this.polygons[0].push_back(new Vector(450.0, 400.0, 0));\r\n        this.polygons.push(new Polygon());\r\n        this.polygons[1].push_back(new Vector(900.0, 420.0, 0));\r\n        this.polygons[1].push_back(new Vector(900.0, 600.0, 0));\r\n        this.polygons[1].push_back(new Vector(450.0, 600.0, 0));\r\n        this.polygons[1].push_back(new Vector(450.0, 420.0, 0));\r\n        this.squareToCut = this.polygons[0].countSquare() / 47.0;\r\n        this.selectedPolygon = 0;\r\n    };\r\n\r\n    drawCircle = (context, centerX, centerY, r) => {\r\n        // draw the colored region\r\n        context.beginPath();\r\n        context.arc(centerX, centerY, r, 0, 2 * Math.PI, true);\r\n        context.closePath();\r\n    }\r\n};","import RenderArea from \"../app/renderArea.js\";\r\n\r\nlet renderArea;\r\nconst ctx = document.getElementById(\"cvs\").getContext(\"2d\");\r\n\r\nctx.canvas.width = window.innerWidth;\r\nctx.canvas.height = window.innerHeight;\r\nwindow.onresize = function () {\r\n    ctx.canvas.width = window.innerWidth;\r\n    ctx.canvas.height = window.innerHeight;\r\n    canvasSize = { top: 0, left: 0, width: window.innerWidth, height: window.innerHeight };\r\n    console.log(\"onresize\");\r\n};\r\n\r\nwindow.onload = function () {\r\n    renderArea = new RenderArea({ ctx });\r\n    renderArea.initPolygons();\r\n    renderArea.paint();\r\n\r\n    document.onkeyup = renderArea.keyPressEvent;\r\n    document.getElementById(\"cvs\").onwheel = renderArea.wheelEvent;\r\n    document.getElementById(\"cvs\").onmousemove = renderArea.mouseMoveEvent;\r\n    document.getElementById(\"cvs\").onmouseup = renderArea.mouseReleaseEvent;\r\n    document.getElementById(\"cvs\").onmousedown = renderArea.mousePressEvent;\r\n    document.getElementById(\"cvs\").oncontextmenu = function () { return false; };\r\n\r\n}\r\n\r\n\r\n\r\n\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}